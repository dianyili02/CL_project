if done:
    shaped_reward = 100.0
    episode_success = True

    # === è·¯å¾„æ•ˆç‡æƒ©ç½š ===
    optimal_length = max(len(opt_path) - 1, 1)
    agent_length = max(len(agent_path) - 1, 1)

    # Detour è¶…å‡ºéƒ¨åˆ†
    if agent_length > optimal_length:
        penalty = (agent_length - optimal_length) * 1.0  # æ¯å¤šä¸€æ­¥æ‰£ 1 åˆ†ï¼ˆå¯è°ƒï¼‰
        shaped_reward -= penalty
        print(f"ğŸš¨ Path Detour Penalty: -{penalty} (Agent: {agent_length}, Expert: {optimal_length})")

